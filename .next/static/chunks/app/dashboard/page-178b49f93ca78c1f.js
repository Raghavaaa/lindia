(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{3679:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var i=r(5155),s=r(2115),l=r(2619),a=r.n(l),d=r(9466);function n(){let{clients:e,directories:t,subdirectories:r,active:l,setActive:n,addDirectory:c,addSubdirectory:o}=(0,d.C)(),[x,u]=(0,s.useState)(!1),[m,b]=(0,s.useState)(!1),[h,p]=(0,s.useState)(""),[f,k]=(0,s.useState)(""),g=e.find(e=>e.id===l.clientId),v=t.filter(e=>e.clientId===l.clientId),y=t.find(e=>e.id===l.directoryId),w=r.filter(e=>e.directoryId===l.directoryId);return(0,i.jsx)("aside",{className:"w-64 shrink-0",children:(0,i.jsxs)("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-4 space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xs uppercase tracking-wider text-zinc-500 dark:text-zinc-400 px-2 mb-2",children:"Clients"}),(0,i.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:0===e.length?(0,i.jsx)("div",{className:"px-3 py-2 text-sm text-zinc-500",children:"No clients yet"}):e.map(e=>{let t=l.clientId===e.id;return(0,i.jsxs)("button",{onClick:()=>n({clientId:e.id,directoryId:void 0,subdirectoryId:void 0}),className:"w-full text-left px-3 py-2 rounded-xl text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors ".concat(t?"bg-zinc-100 dark:bg-zinc-800":""),children:[(0,i.jsx)("div",{className:"font-medium",children:e.name}),(0,i.jsx)("div",{className:"text-xs text-zinc-500",children:e.phone})]},e.id)})})]}),g&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-2 mb-2",children:[(0,i.jsx)("h2",{className:"text-xs uppercase tracking-wider text-zinc-500 dark:text-zinc-400",children:"Directories"}),(0,i.jsx)("button",{onClick:()=>u(!x),className:"text-xs text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300",children:"+ Add"})]}),x&&(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),h.trim()&&l.clientId&&(c(l.clientId,h.trim()),p(""),u(!1))},className:"mb-2",children:(0,i.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"Directory name",className:"w-full px-3 py-2 rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 text-sm",autoFocus:!0})}),(0,i.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:v.map(e=>{let t=l.directoryId===e.id;return(0,i.jsx)("button",{onClick:()=>n({directoryId:e.id,subdirectoryId:void 0}),className:"w-full text-left px-3 py-2 rounded-xl text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors ".concat(t?"bg-zinc-100 dark:bg-zinc-800":""),children:e.name},e.id)})})]}),y&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-2 mb-2",children:[(0,i.jsx)("h2",{className:"text-xs uppercase tracking-wider text-zinc-500 dark:text-zinc-400",children:"Subdirectories"}),(0,i.jsx)("button",{onClick:()=>b(!m),className:"text-xs text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300",children:"+ Add"})]}),m&&(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),f.trim()&&l.directoryId&&(o(l.directoryId,f.trim()),k(""),b(!1))},className:"mb-2",children:(0,i.jsx)("input",{type:"text",value:f,onChange:e=>k(e.target.value),placeholder:"Subdirectory name",className:"w-full px-3 py-2 rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 text-sm",autoFocus:!0})}),(0,i.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:w.map(e=>{let t=l.subdirectoryId===e.id;return(0,i.jsx)("button",{onClick:()=>n({subdirectoryId:e.id}),className:"w-full text-left px-3 py-2 rounded-xl text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors ".concat(t?"bg-zinc-100 dark:bg-zinc-800":""),children:e.name},e.id)})})]}),(0,i.jsx)("div",{className:"pt-2 border-t border-black/5 dark:border-white/10",children:(0,i.jsx)(a(),{href:"/settings",className:"block px-3 py-2 rounded-xl text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",children:"Settings"})})]})})}let c=[{key:"property",label:"Property Opinions"},{key:"research",label:"Research"},{key:"case",label:"Case"},{key:"junior",label:"Junior"}];function o(e){let{active:t="property",onChange:r}=e;return(0,i.jsx)("div",{className:"w-full flex justify-end",children:(0,i.jsx)("div",{className:"flex items-center gap-2 p-2 rounded-2xl bg-zinc-50 dark:bg-zinc-900/50 border border-black/5 dark:border-white/10",children:c.map(e=>{let{key:s,label:l}=e,a=s===t;return(0,i.jsx)("button",{type:"button",onClick:()=>null==r?void 0:r(s),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors "+(a?"bg-black text-white dark:bg-white dark:text-black":"bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700"),children:l},s)})})})}function x(){let e=(0,s.useId)(),[t,r]=(0,s.useState)(!1),[l,a]=(0,s.useState)(null),d="http://localhost:4000";async function n(e){if(e.preventDefault(),a(null),!d)return void a("Missing NEXT_PUBLIC_API_URL");let t=e.currentTarget,i=new FormData(t),s=i.get("file");if(!(s instanceof File)||0===s.size)return void a("Please choose a file to upload.");r(!0);try{let e=await fetch("".concat(d,"/upload"),{method:"POST",body:i});if(!e.ok){let t=await e.text();throw Error(t||"Upload failed with status ".concat(e.status))}a("Upload successful."),t.reset()}catch(e){a(e.message)}finally{r(!1)}}return(0,i.jsxs)("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Upload"}),(0,i.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-4",children:"Upload documents to process within Directories."}),(0,i.jsxs)("form",{onSubmit:n,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("label",{htmlFor:e,className:"text-sm w-24",children:"File"}),(0,i.jsx)("input",{id:e,name:"file",type:"file",className:"block w-full text-sm"})]}),(0,i.jsx)("div",{className:"flex items-center gap-3",children:(0,i.jsx)("button",{type:"submit",disabled:t||!d,className:"inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium text-white bg-black hover:bg-zinc-800 disabled:opacity-60",children:t?"Uploading...":d?"Upload":"Upload (API URL missing)"})}),l&&(0,i.jsx)("div",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:l})]})]})}function u(e){let{onClose:t}=e,{clients:r,addClient:l,setActive:a}=(0,d.C)(),[n,c]=(0,s.useState)(""),[o,x]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[b,h]=(0,s.useState)(""),p=(0,s.useMemo)(()=>{let e=n.trim().toLowerCase();return e?r.filter(t=>t.name.toLowerCase().includes(e)):r},[r,n]);return(0,s.useEffect)(()=>{function e(e){"Escape"===e.key&&(null==t||t())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]),(0,i.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:t}),(0,i.jsxs)("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select client or add new"}),(0,i.jsx)("input",{value:n,onChange:e=>c(e.target.value),placeholder:"Search clients...",className:"w-full rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 px-3 py-2 text-sm"}),(0,i.jsxs)("div",{className:"mt-3 max-h-48 overflow-auto space-y-1",children:[p.map(e=>(0,i.jsx)("button",{onClick:()=>{a({clientId:e.id}),null==t||t()},className:"w-full text-left px-3 py-2 rounded-xl text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",children:e.name},e.id)),0===p.length&&(0,i.jsx)("div",{className:"text-sm text-zinc-500 px-3 py-2",children:"No matches"})]}),o?(0,i.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm mb-1",children:"Client name"}),(0,i.jsx)("input",{value:u,onChange:e=>m(e.target.value),className:"w-full rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 px-3 py-2 text-sm"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm mb-1",children:"Reference ID (optional)"}),(0,i.jsx)("input",{value:b,onChange:e=>h(e.target.value),className:"w-full rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 px-3 py-2 text-sm"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,i.jsx)("button",{onClick:t,className:"px-3 py-2 rounded-xl text-sm font-medium bg-white dark:bg-zinc-800 border border-black/10 dark:border-white/10",children:"Cancel"}),(0,i.jsx)("button",{onClick:function(){let e=u.trim();e&&(a({clientId:l({name:e,phone:"",referenceId:b.trim()||void 0}).id}),null==t||t())},className:"px-3 py-2 rounded-xl text-sm font-medium bg-black text-white",children:"Create"})]})]}):(0,i.jsx)("div",{className:"mt-4 flex justify-end",children:(0,i.jsx)("button",{onClick:()=>x(!0),className:"px-3 py-2 rounded-xl text-sm font-medium bg-black text-white",children:"Add New Client"})})]})]})}function m(e){let{userId:t,onClose:r}=e,[l,a]=(0,s.useState)(""),[d,n]=(0,s.useState)(!1),[c,o]=(0,s.useState)(null),[x,u]=(0,s.useState)(null),[m,b]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),f=(0,s.useRef)(null),k=(0,s.useRef)(null);async function g(e){e.preventDefault(),n(!0),u(null),o(null),p(!1);try{var r;let e=await fetch("/api/research",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:l,userId:t})}),i=await e.json();if(!e.ok)throw Error((null==i?void 0:i.error)||"Request failed");o(String(null!=(r=i.result)?r:""))}catch(e){u(e.message)}finally{n(!1)}}async function v(){if(c&&l){b(!0);try{(await fetch("/api/research",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:l,userId:t,save:!0,result:c})})).ok&&(p(!0),setTimeout(()=>p(!1),3e3))}catch(e){console.error("Failed to save research:",e)}finally{b(!1)}}}return(0,s.useEffect)(()=>{c&&f.current&&(f.current.scrollTop=f.current.scrollHeight)},[c]),(0,s.useEffect)(()=>{let e=()=>{if(f.current&&k.current){let{scrollTop:e}=f.current;k.current.style.display=e>100?"block":"none"}},t=f.current;if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[c]),(0,i.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-in fade-in duration-200",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:r}),(0,i.jsxs)("div",{className:"relative z-10 w-full max-w-4xl h-[80vh] rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6 animate-in zoom-in-95 duration-200 flex flex-col",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter your research query"}),(0,i.jsxs)("form",{onSubmit:g,className:"space-y-4 flex-shrink-0",children:[(0,i.jsx)("textarea",{value:l,onChange:e=>a(e.target.value),placeholder:"Example: My property was encroached by seller — what legal remedy do I have?",className:"w-full min-h-32 rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 px-3 py-2 text-sm resize-none"}),(0,i.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,i.jsx)("button",{type:"button",onClick:r,className:"px-3 py-2 rounded-xl text-sm bg-white dark:bg-zinc-800 border border-black/10 dark:border-white/10",children:"Close"}),(0,i.jsx)("button",{disabled:d||!l.trim(),className:"px-4 py-2 rounded-xl text-sm font-medium bg-black text-white disabled:opacity-60",children:d?"Running...":"Run Research"})]})]}),x&&(0,i.jsx)("div",{className:"mt-4 p-3 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:(0,i.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400",children:x})}),c&&(0,i.jsxs)("div",{className:"mt-4 flex-1 flex flex-col min-h-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Research Output"}),(0,i.jsx)("button",{onClick:v,disabled:m||h,className:"px-3 py-1 rounded-lg text-xs font-medium bg-green-600 text-white disabled:opacity-60 hover:bg-green-700 transition-colors",children:m?"Saving...":h?"Saved!":"Save Research"})]}),(0,i.jsx)("div",{ref:f,className:"flex-1 rounded-xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-800 p-4 whitespace-pre-wrap text-sm overflow-y-auto scroll-smooth",children:c}),(0,i.jsx)("button",{ref:k,onClick:()=>{f.current&&f.current.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-8 right-8 w-10 h-10 rounded-full bg-black text-white shadow-lg hover:bg-zinc-800 transition-colors animate-in fade-in duration-200",style:{display:"none"},children:"↑"})]})]})]})}function b(e){let{onSelectClient:t,onCreateClient:r,onClose:l,existingClients:a}=e,[d,n]=(0,s.useState)("select"),[c,o]=(0,s.useState)({name:"",phone:"",email:"",address:""});return(0,i.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-in fade-in duration-200",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:l}),(0,i.jsxs)("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6 animate-in zoom-in-95 duration-200",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Client Selection"}),"select"===d?(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,i.jsx)("button",{onClick:()=>n("select"),className:"px-3 py-2 rounded-xl text-sm font-medium bg-black text-white",children:"Select Existing"}),(0,i.jsx)("button",{onClick:()=>n("create"),className:"px-3 py-2 rounded-xl text-sm font-medium bg-white dark:bg-zinc-800 border border-black/10 dark:border-white/10",children:"Create New"})]}),a.length>0?(0,i.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.map(e=>(0,i.jsxs)("button",{onClick:()=>t(e),className:"w-full text-left p-3 rounded-xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors",children:[(0,i.jsx)("div",{className:"font-medium",children:e.name}),(0,i.jsx)("div",{className:"text-sm text-zinc-500",children:e.phone})]},e.id))}):(0,i.jsx)("p",{className:"text-sm text-zinc-500 text-center py-4",children:"No existing clients found"})]}):(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c.name.trim()&&c.phone.trim()&&(r({name:c.name.trim(),phone:c.phone.trim(),email:c.email.trim()||void 0,address:c.address.trim()||void 0}),l())},className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,i.jsx)("button",{type:"button",onClick:()=>n("select"),className:"px-3 py-2 rounded-xl text-sm font-medium bg-white dark:bg-zinc-800 border border-black/10 dark:border-white/10",children:"Select Existing"}),(0,i.jsx)("button",{type:"button",onClick:()=>n("create"),className:"px-3 py-2 rounded-xl text-sm font-medium bg-black text-white",children:"Create New"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Client Name *"}),(0,i.jsx)("input",{type:"text",value:c.name,onChange:e=>o({...c,name:e.target.value}),className:"w-full px-3 py-2 rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 text-sm",placeholder:"Enter client name",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Phone Number *"}),(0,i.jsx)("input",{type:"tel",value:c.phone,onChange:e=>o({...c,phone:e.target.value}),className:"w-full px-3 py-2 rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 text-sm",placeholder:"Enter phone number",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email (Optional)"}),(0,i.jsx)("input",{type:"email",value:c.email,onChange:e=>o({...c,email:e.target.value}),className:"w-full px-3 py-2 rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 text-sm",placeholder:"Enter email address"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Office Address (Optional)"}),(0,i.jsx)("textarea",{value:c.address,onChange:e=>o({...c,address:e.target.value}),className:"w-full px-3 py-2 rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 text-sm",placeholder:"Enter office address",rows:2})]}),(0,i.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,i.jsx)("button",{type:"button",onClick:l,className:"flex-1 px-3 py-2 rounded-xl text-sm bg-white dark:bg-zinc-800 border border-black/10 dark:border-white/10",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"flex-1 px-3 py-2 rounded-xl text-sm font-medium bg-black text-white",children:"Create Client"})]})]})]})]})}function h(){var e;let{active:t,setActive:r,directories:l,subdirectories:a,addDirectory:c,addSubdirectory:h,getClientName:p,clients:f,addClient:k}=(0,d.C)(),[g,v]=(0,s.useState)(void 0),[y,w]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[z,C]=(0,s.useState)(!1),[I,S]=(0,s.useState)(void 0),E=!!t.clientId,O=E&&!!g,P=l.find(e=>e.id===t.directoryId),D=a.find(e=>e.id===t.subdirectoryId);function R(e){r({clientId:e.id}),C(!1),I&&(v(I),"research"===I&&N(!0),S(void 0))}return(0,i.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-6 space-y-6",children:[(0,i.jsx)(o,{active:g,onChange:function(e){if(!E){S(e),C(!0);return}v(e),"research"===e&&N(!0)}}),(0,i.jsxs)("div",{className:"flex items-start gap-6",children:[(0,i.jsx)(n,{}),(0,i.jsx)("div",{className:"flex-1 space-y-6",children:O?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:(0,i.jsxs)("h3",{className:"text-sm uppercase tracking-wider text-zinc-500 dark:text-zinc-400 mb-1",children:["property"===g&&"Property Opinions","research"===g&&"Research","case"===g&&"Case","junior"===g&&"Junior",t.clientId?" • ".concat(null!=(e=p(t.clientId))?e:""):""]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("section",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h4",{className:"text-xs uppercase tracking-wider text-zinc-500 dark:text-zinc-400",children:"Directories"}),(0,i.jsx)("button",{className:"px-3 py-1.5 rounded-xl text-sm font-medium bg-black text-white",onClick:()=>{if(!t.clientId)return;let e=window.prompt("New directory name?");e&&r({directoryId:c(t.clientId,e).id,subdirectoryId:void 0})},children:"New Directory"})]}),(0,i.jsx)("div",{className:"mt-3 space-y-2",children:l.filter(e=>e.clientId===t.clientId).map(e=>(0,i.jsx)("button",{onClick:()=>r({directoryId:e.id,subdirectoryId:void 0}),className:"w-full text-left px-3 py-2 rounded-xl text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 ".concat(t.directoryId===e.id?"bg-zinc-100 dark:bg-zinc-800":""),children:e.name},e.id))}),P&&!D&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(x,{})})]}),(0,i.jsxs)("section",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h4",{className:"text-xs uppercase tracking-wider text-zinc-500 dark:text-zinc-400",children:"Subdirectories"}),(0,i.jsx)("button",{className:"px-3 py-1.5 rounded-xl text-sm font-medium bg-black text-white",onClick:()=>{if(!t.directoryId)return;let e=window.prompt("New subdirectory name?");e&&r({subdirectoryId:h(t.directoryId,e).id})},children:"New Subdirectory"})]}),(0,i.jsx)("div",{className:"mt-3 space-y-2",children:a.filter(e=>e.directoryId===t.directoryId).map(e=>(0,i.jsx)("button",{onClick:()=>r({subdirectoryId:e.id}),className:"w-full text-left px-3 py-2 rounded-xl text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 ".concat(t.subdirectoryId===e.id?"bg-zinc-100 dark:bg-zinc-800":""),children:e.name},e.id))}),D&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(x,{})})]})]})]}):(0,i.jsx)("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-10 text-center text-zinc-600 dark:text-zinc-400",children:"Choose an option at top-right to begin."})})]}),y&&(0,i.jsx)(u,{onClose:()=>w(!1)}),z&&(0,i.jsx)(b,{onSelectClient:R,onCreateClient:function(e){R(k(e))},onClose:()=>{C(!1),S(void 0)},existingClients:f}),j&&(0,i.jsx)(m,{userId:t.clientId,onClose:()=>N(!1)})]})}},6358:(e,t,r)=>{Promise.resolve().then(r.bind(r,3679))},9466:(e,t,r)=>{"use strict";r.d(t,{AppStoreProvider:()=>n,C:()=>c});var i=r(5155),s=r(2115);let l=(0,s.createContext)(null),a="legalindia.store.v1";function d(e){return"".concat(e,"_").concat(Math.random().toString(36).slice(2,10))}function n(e){let{children:t}=e,[r,n]=(0,s.useState)(()=>{try{var e;let t=window.localStorage.getItem(a);if(!t)return{clients:[],directories:[],subdirectories:[],active:{}};let r=JSON.parse(t);return{...r,active:null!=(e=r.active)?e:{}}}catch(e){return{clients:[],directories:[],subdirectories:[],active:{}}}});(0,s.useEffect)(()=>{try{window.localStorage.setItem(a,JSON.stringify(r))}catch(e){}},[r]);let c=(0,s.useCallback)(e=>{n(t=>({...t,active:{...t.active,...e}}))},[]),o=(0,s.useCallback)(e=>{let t={id:d("cli"),...e};return n(e=>({...e,clients:[...e.clients,t]})),t},[]),x=(0,s.useCallback)(e=>{n(t=>({...t,clients:t.clients.filter(t=>t.id!==e),directories:t.directories.filter(t=>t.clientId!==e),subdirectories:t.subdirectories.filter(r=>{var i;return(null==(i=t.directories.find(e=>e.id===r.directoryId))?void 0:i.clientId)!==e}),active:t.active.clientId===e?{}:t.active}))},[]),u=(0,s.useCallback)((e,t)=>{let r={id:d("dir"),name:t,clientId:e};return n(e=>({...e,directories:[...e.directories,r]})),r},[]),m=(0,s.useCallback)((e,t)=>{let r={id:d("sub"),name:t,directoryId:e};return n(e=>({...e,subdirectories:[...e.subdirectories,r]})),r},[]),b=(0,s.useCallback)(e=>{n(t=>({...t,logoDataUrl:e}))},[]),h=(0,s.useCallback)(e=>{var t;return null==(t=r.clients.find(t=>t.id===e))?void 0:t.name},[r.clients]),p=(0,s.useMemo)(()=>({...r,setActive:c,addClient:o,removeClient:x,addDirectory:u,addSubdirectory:m,setLogoDataUrl:b,getClientName:h}),[r,c,o,x,u,m,b,h]);return(0,i.jsx)(l.Provider,{value:p,children:t})}function c(){let e=(0,s.useContext)(l);if(!e)throw Error("useAppStore must be used within AppStoreProvider");return e}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=6358)),_N_E=e.O()}]);