(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{2802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(9466),i=r(2115),l=r(5239);function c(){let{logoDataUrl:e,setLogoDataUrl:t,clients:r,removeClient:c}=(0,a.C)(),n=(0,i.useId)(),[d,o]=(0,i.useState)(e),[u,x]=(0,i.useState)(""),[m,h]=(0,i.useState)(!1),[b,p]=(0,i.useState)(""),[f,g]=(0,i.useState)([]),[k,v]=(0,i.useState)("logo");async function j(e){var r;let s=null==(r=e.target.files)?void 0:r[0];if(!s)return;let a=new FileReader;a.onload=()=>{let e=String(a.result);o(e),t(e)},a.readAsDataURL(s)}async function w(){h(!0),p("");try{(await fetch("/api/admin/updatePrompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:u})})).ok?p("Prompt updated successfully!"):p("Failed to update prompt")}catch(e){p("Error updating prompt")}finally{h(!1)}}return(0,i.useEffect)(()=>{fetch("/api/research",{method:"GET"}).then(e=>e.json()).then(e=>x(e.prompt||"")).catch(()=>{}),fetch("/api/research/saved").then(e=>e.json()).then(e=>g(e.research||[])).catch(()=>{})},[]),(0,s.jsxs)("div",{className:"mx-auto max-w-4xl px-6 py-10 space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Settings"}),(0,s.jsx)("div",{className:"flex gap-2 p-2 rounded-2xl bg-zinc-50 dark:bg-zinc-900/50 border border-black/5 dark:border-white/10",children:[{key:"logo",label:"Logo"},{key:"prompt",label:"Research Prompt"},{key:"clients",label:"Clients"},{key:"research",label:"Saved Research"}].map(e=>{let{key:t,label:r}=e;return(0,s.jsx)("button",{onClick:()=>v(t),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(k===t?"bg-black text-white dark:bg-white dark:text-black":"bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700"),children:r},t)})}),"logo"===k&&(0,s.jsxs)("section",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:[(0,s.jsx)("h2",{className:"text-sm uppercase tracking-wider text-zinc-500 dark:text-zinc-400 mb-3",children:"Upload Logo"}),(0,s.jsx)("p",{className:"text-xs text-zinc-500 mb-3",children:"Recommended 256\xd7256 PNG"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-16 w-16 rounded-xl bg-black/10 dark:bg-white/10 overflow-hidden",children:d&&(0,s.jsx)(l.default,{src:d,alt:"Logo preview",width:64,height:64,className:"h-full w-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{htmlFor:n,className:"block text-sm mb-1",children:"Logo file"}),(0,s.jsx)("input",{id:n,type:"file",accept:"image/png,image/jpeg,image/webp",onChange:j,className:"block w-full text-sm"})]})]})]}),"prompt"===k&&(0,s.jsxs)("section",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:[(0,s.jsx)("h2",{className:"text-sm uppercase tracking-wider text-zinc-500 dark:text-zinc-400 mb-3",children:"Research Prompt"}),(0,s.jsx)("p",{className:"text-xs text-zinc-500 mb-3",children:"Customize how the AI responds to legal research queries"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("textarea",{value:u,onChange:e=>x(e.target.value),placeholder:"Enter your custom prompt for legal research...",className:"w-full min-h-32 rounded-xl border border-black/10 dark:border-white/10 bg-white dark:bg-zinc-800 px-3 py-2 text-sm"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:w,disabled:m,className:"px-4 py-2 rounded-xl text-sm font-medium bg-black text-white disabled:opacity-60",children:m?"Saving...":"Save Prompt"}),b&&(0,s.jsx)("span",{className:"text-sm text-green-600",children:b})]})]})]}),"clients"===k&&(0,s.jsxs)("section",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:[(0,s.jsx)("h2",{className:"text-sm uppercase tracking-wider text-zinc-500 dark:text-zinc-400 mb-3",children:"Manage Clients"}),(0,s.jsx)("p",{className:"text-xs text-zinc-500 mb-4",children:"View and manage your client list"}),(0,s.jsx)("div",{className:"space-y-3",children:0===r.length?(0,s.jsx)("p",{className:"text-sm text-zinc-500 text-center py-8",children:"No clients found"}):r.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-800",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-zinc-500",children:e.phone}),e.email&&(0,s.jsx)("div",{className:"text-sm text-zinc-500",children:e.email})]}),(0,s.jsx)("button",{onClick:()=>c(e.id),className:"px-3 py-1 rounded-lg text-xs font-medium bg-red-600 text-white hover:bg-red-700 transition-colors",children:"Delete"})]},e.id))})]}),"research"===k&&(0,s.jsxs)("section",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-900 p-6",children:[(0,s.jsx)("h2",{className:"text-sm uppercase tracking-wider text-zinc-500 dark:text-zinc-400 mb-3",children:"Saved Research"}),(0,s.jsx)("p",{className:"text-xs text-zinc-500 mb-4",children:"View and manage your saved research queries"}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===f.length?(0,s.jsx)("p",{className:"text-sm text-zinc-500 text-center py-8",children:"No saved research found"}):f.map(e=>(0,s.jsxs)("div",{className:"p-4 rounded-xl border border-black/5 dark:border-white/10 bg-white dark:bg-zinc-800",children:[(0,s.jsx)("div",{className:"font-medium text-sm mb-2",children:e.query_text}),(0,s.jsx)("div",{className:"text-xs text-zinc-500 mb-2",children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400 line-clamp-3",children:e.response_text})]},e.id))})]})]})}},3011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=r(2115);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=i(e,s)),t&&(a.current=i(t,s))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8441:(e,t,r)=>{Promise.resolve().then(r.bind(r,2802))},9466:(e,t,r)=>{"use strict";r.d(t,{AppStoreProvider:()=>n,C:()=>d});var s=r(5155),a=r(2115);let i=(0,a.createContext)(null),l="legalindia.store.v1";function c(e){return"".concat(e,"_").concat(Math.random().toString(36).slice(2,10))}function n(e){let{children:t}=e,[r,n]=(0,a.useState)(()=>{try{var e;let t=window.localStorage.getItem(l);if(!t)return{clients:[],directories:[],subdirectories:[],active:{}};let r=JSON.parse(t);return{...r,active:null!=(e=r.active)?e:{}}}catch(e){return{clients:[],directories:[],subdirectories:[],active:{}}}});(0,a.useEffect)(()=>{try{window.localStorage.setItem(l,JSON.stringify(r))}catch(e){}},[r]);let d=(0,a.useCallback)(e=>{n(t=>({...t,active:{...t.active,...e}}))},[]),o=(0,a.useCallback)(e=>{let t={id:c("cli"),...e};return n(e=>({...e,clients:[...e.clients,t]})),t},[]),u=(0,a.useCallback)(e=>{n(t=>({...t,clients:t.clients.filter(t=>t.id!==e),directories:t.directories.filter(t=>t.clientId!==e),subdirectories:t.subdirectories.filter(r=>{var s;return(null==(s=t.directories.find(e=>e.id===r.directoryId))?void 0:s.clientId)!==e}),active:t.active.clientId===e?{}:t.active}))},[]),x=(0,a.useCallback)((e,t)=>{let r={id:c("dir"),name:t,clientId:e};return n(e=>({...e,directories:[...e.directories,r]})),r},[]),m=(0,a.useCallback)((e,t)=>{let r={id:c("sub"),name:t,directoryId:e};return n(e=>({...e,subdirectories:[...e.subdirectories,r]})),r},[]),h=(0,a.useCallback)(e=>{n(t=>({...t,logoDataUrl:e}))},[]),b=(0,a.useCallback)(e=>{var t;return null==(t=r.clients.find(t=>t.id===e))?void 0:t.name},[r.clients]),p=(0,a.useMemo)(()=>({...r,setActive:d,addClient:o,removeClient:u,addDirectory:x,addSubdirectory:m,setLogoDataUrl:h,getClientName:b}),[r,d,o,u,x,m,h,b]);return(0,s.jsx)(i.Provider,{value:p,children:t})}function d(){let e=(0,a.useContext)(i);if(!e)throw Error("useAppStore must be used within AppStoreProvider");return e}}},e=>{e.O(0,[239,441,255,358],()=>e(e.s=8441)),_N_E=e.O()}]);